<?xml version='1.0' encoding='utf-8'?>
<?xml-stylesheet href="/style/browser.xsl" type="text/xsl"?>
<essay xmlns="http://docbook.org/ns/docbook"
       xmlns:xlink="http://www.w3.org/1999/xlink"
       xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'
       xmlns:dc='http://purl.org/dc/elements/1.1/'
       xmlns:dcterms="http://purl.org/dc/terms/"
       xmlns:gal='http://norman.walsh.name/rdf/gallery#'
       xmlns:foaf="http://xmlns.com/foaf/0.1/"
       xml:lang="en"
       version='5.0'>
<info>
<title>Open Source Win</title>
<volumenum>13</volumenum>
<issuenum>29</issuenum>
<pubdate>2010-09-20T10:49:54-04:00</pubdate>
<author><personname>
<firstname>Norman</firstname><surname>Walsh</surname>
</personname></author>
<copyright><year>2010</year><holder>Norman Walsh</holder></copyright>
<abstract>
<para>One of the nice things about open source software is that you can
fix bugs when you find them. More importantly, if you wait a few days,
other smart folks will fix the bugs for you. Such is the case with
iTunes and MT-DAAPD.</para>
</abstract>
</info>

<para xml:id='p1'>I have all our music ripped and stored on a server in the house.
The <wikipedia>Sonos</wikipedia>
box feeds that music into our living room and
<wikipedia>iTunes</wikipedia> feeds it to my
laptop. As I have
<link xlink:href="http://twitter.com/ndw/status/2153346432">said</link>
<link xlink:href="http://twitter.com/ndw/status/3868692923">many</link>
<link xlink:href="http://twitter.com/ndw/status/5102981896">times</link>,
iTunes
<link xlink:href="http://twitter.com/ndw/status/2206289805">is the suck</link>.
Most recently, an iTunes upgrade
<link xlink:href="http://identi.ca/notice/48552978">broke</link> the media
server. Well, the media server is fine, but iTunes can't see the music.</para>

<para xml:id='p2'>I waited a few days, and smart people seem to have worked out most
of the problems. Here's how I got it working again.</para>

<orderedlist>
<listitem>
<para xml:id='p3'>It seems that
<link xlink:href="http://github.com/jasonmc/forked-daapd">forked-daapd</link> is
the right place to start. I had been running <literal>mt-daapd</literal> (ne
“<link xlink:href="http://www.fireflymediaserver.org/">Firefly</link>”), but
development there seems to have stalled.</para>
</listitem>
<listitem>
<para xml:id='p4'>I grabbed the code and tried to build it. It seemed to want things that
weren't easily available for Ubuntu 9.10, so I went ahead and ran the upgrade
to 10.04. It went fine, I'm happy to report.</para>
</listitem>
<listitem>
<para xml:id='p5'>For reasons I couldn't work out, <command>pkg-config</command> didn't
seem to know about zlib, so I
<link xlink:href="http://ubuntuforums.org/showpost.php?p=9533395&amp;postcount=19">followed
the advice</link> to set <code>ZLIB_CLFAGS</code> and <code>ZLIB_LIBS</code>
directly.</para>
</listitem>
<listitem>
<para xml:id='p6'>There also seemed to be some issues with Antlr that someone else
<link xlink:href="http://blog.zortrium.net/archives/7">also worked out</link>.
</para>
</listitem>
<listitem>
<para xml:id='p7'>A few <command>apt-get install …</command>/<command>./configure</command>
iterations got me through the rest of the dependencies, though working out that
ALSA is provided by <literal>libasound-dev</literal> took a little digging.
</para>
</listitem>
</orderedlist>

<para xml:id='p8'>From there, the standard make install dance got it up and running.</para>

<para xml:id='p9'>Was this more complicated than I would have liked? Sure. But it was
possible!</para>

<para xml:id='p10'>The forked server isn't (yet) as nice as mt-daapd.
The most annoying bug is that iTunes occasionally disconnects in
the middle of a song.
Also, it doesn't have a web UI or smart playlists and
doesn't seem to correctly parse the metadata in some files. It
<emphasis>does</emphasis>
transcode from
<wikipedia page="Free_Lossless_Audio_Codec">FLAC</wikipedia> on the
fly though, so that part is still working.</para>

<para xml:id='p11'>These bugs will go away. Because smart people will fix them.
Because it's open source.</para>

<para xml:id='p12'>Now, if someone's knows of a decent DAAP-aware replacement for
iTunes, that would make things easier too.</para>

</essay>

